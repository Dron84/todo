(function(t){function e(e){for(var o,i,r=e[0],c=e[1],d=e[2],u=0,h=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&h.push(a[i][0]),a[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(h.length)h.shift()();return n.push.apply(n,d||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],o=!0,r=1;r<s.length;r++){var c=s[r];0!==a[c]&&(o=!1)}o&&(n.splice(e--,1),t=i(i.s=s[0]))}return t}var o={},a={app:0},n=[];function i(e){if(o[e])return o[e].exports;var s=o[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=o,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var l=c;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0e92":function(t,e,s){"use strict";var o=s("fad3"),a=s.n(o);a.a},"119d":function(t,e,s){"use strict";var o=s("e761"),a=s.n(o);a.a},1545:function(t,e,s){},1751:function(t,e,s){"use strict";var o=s("4f5d"),a=s.n(o);a.a},"2ba1":function(t,e,s){},4986:function(t,e,s){"use strict";var o=s("71b7"),a=s.n(o);a.a},"4f5d":function(t,e,s){},"56b2":function(t,e,s){"use strict";var o=s("2ba1"),a=s.n(o);a.a},"56d7":function(t,e,s){"use strict";s.r(e);s("4fad"),s("e260"),s("e6cf"),s("cca6"),s("a79d");var o=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("navbar",{attrs:{taskShow:t.addTaskShow},on:{add:t.onAdd}}),t.addTaskShow||t.editTaskShow?t._e():s("todolist",{attrs:{todolist:t.getTodo()},on:{Edit:function(e){return t.onedit(e)},Delete:function(e){return t.ondelete(e)}}}),t.addTaskShow?s("addTask",{on:{close:function(e){t.addTaskShow=!1},success:function(e){return t.addTask(e)}}}):t._e(),t.editTaskShow?s("editTask",{attrs:{task:t.editTask},on:{editClose:function(e){t.editTaskShow=!1},removeItem:t.removeItem,onCancel:t.onCancel}}):t._e(),s("modal",{attrs:{header:t.modal.modalHeader,modalShow:t.modal.modalShow,buttonSuccess:t.modal.successText,buttonError:t.modal.errorText,successShow:t.modal.successShow,errorShow:t.modal.errorShow},on:{modalSuccess:function(e){return t.modalClick("success")},modalError:function(e){return t.modalClick("error")}}})],1)},n=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"nav"},[s("div",{staticClass:"brand"},[t._v("ToDo list")]),s("div",{staticClass:"button",class:{exit:t.taskShow},on:{click:t.addClick}},[s("i",{staticClass:"flaticon-add",attrs:{title:"Добавить"}})])])},r=[],c={name:"navbar",methods:{addClick:function(){this.$emit("add")}},props:{taskShow:{type:Boolean,default:!1}}},d=c,l=(s("119d"),s("2877")),u=Object(l["a"])(d,i,r,!1,null,"e0e97b8c",null),h=u.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list"},t._l(t.todolist,(function(e){return s("div",{key:e.id,staticClass:"item",class:e.color},[s("div",{staticClass:"description"},[s("span",{staticClass:"name"},[t._v(t._s(e.name))]),s("div",{staticClass:"description_list"},t._l(e.list,(function(t){return s("div",{key:t.name,staticClass:"desc_item"},[s("checkbox",{attrs:{checked:t.done,id:t.name.replace(" ","_"),disabled:!0,caption:t.name}})],1)})),0)]),s("div",{staticClass:"flaticon-edit",attrs:{title:"Редактировать"},on:{click:function(s){return t.openEdit(e)}}}),s("div",{staticClass:"flaticon-delete",attrs:{title:"Удалить"},on:{click:function(s){return t.openDelete(e)}}})])})),0)},f=[],p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("input",{staticStyle:{display:"none"},attrs:{type:"checkbox",id:t.id,disabled:t.disabled},domProps:{checked:t.setCheck}}),s("label",{staticClass:"check",attrs:{for:t.id},on:{click:function(e){t.setCheck=!t.setCheck}}},[s("svg",{attrs:{width:"18px",height:"18px",viewBox:"0 0 18 18"}},[s("path",{attrs:{d:"M1,9 L1,3.5 C1,2 2,1 3.5,1 L14.5,1 C16,1 17,2 17,3.5 L17,14.5 C17,16 16,17 14.5,17 L3.5,17 C2,17 1,16 1,14.5 L1,9 Z"}}),s("polyline",{attrs:{points:"1 9 7 14 15 4"}})])]),s("span",{staticClass:"caption"},[t._v(t._s(t.caption))])])},_=[],k={name:"checkbox",data:function(){return{check:!1}},props:{checked:{type:Boolean,default:!1},id:{type:String,default:""},disabled:{type:Boolean,default:!1},caption:{type:String,default:""}},computed:{setCheck:{get:function(){return this.checked},set:function(t){this.$emit("value",t)}}}},v=k,b=(s("56b2"),Object(l["a"])(v,p,_,!1,null,null,null)),y=b.exports,w={name:"todoList",components:{checkbox:y},props:{todolist:null},methods:{openEdit:function(t){this.$emit("Edit",t)},openDelete:function(t){this.$emit("Delete",t)}}},C=w,S=(s("6de6"),Object(l["a"])(C,m,f,!1,null,"1585ad78",null)),x=S.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal_wrapper",class:{show:t.modalShow}},[s("div",{staticClass:"modal_container"},[s("div",{staticClass:"modal_header"},[s("h2",[t._v(t._s(t.header))]),s("div",{staticClass:"close",on:{click:function(e){t.modalShow=!t.modalShow}}},[t._v("×")])]),s("div",{staticClass:"modal_body"},[t._t("default")],2),s("div",{staticClass:"modal_footer"},[t.successShow?s("button",{staticClass:"btn btn-success",on:{click:t.onSuccess}},[t._v(t._s(t.buttonSuccess))]):t._e(),t.errorShow?s("button",{staticClass:"btn btn-error",on:{click:t.onError}},[t._v(t._s(t.buttonError))]):t._e()])])])},g=[],$={name:"modal",props:{modalShow:{type:Boolean,default:!1},header:{type:String,default:""},buttonSuccess:{type:String,default:"OK"},buttonError:{type:String,default:"Cancel"},successShow:{type:Boolean,default:!0},errorShow:{type:Boolean,default:!0}},methods:{onSuccess:function(){this.$emit("modalSuccess","click")},onError:function(){this.$emit("modalError","click")}}},I=$,O=(s("0e92"),Object(l["a"])(I,T,g,!1,null,null,null)),E=O.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"added"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.task_name,expression:"task_name"}],ref:"task_name_input",attrs:{type:"text",placeholder:"Имя задачи"},domProps:{value:t.task_name},on:{change:t.add_history,input:function(e){e.target.composing||(t.task_name=e.target.value)}}}),s("colorSelectBox",{attrs:{color:t.task_color},on:{value:function(e){return t.setColor(e)}}}),s("div",{staticClass:"add"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.added_name,expression:"added_name"}],ref:"subtask_name",attrs:{type:"text",placeholder:"Что сделать"},domProps:{value:t.added_name},on:{change:t.add_history,input:function(e){e.target.composing||(t.added_name=e.target.value)}}}),s("button",{staticClass:"btn btn-success",on:{click:t.addObj}},[t._v("Добавить")])]),s("list",{attrs:{list:t.add_list},on:{remItem:function(e){return t.remItem(e)}}}),s("div",{staticClass:"footer"},[t.historysIndex>0?s("button",{staticClass:"btn btn-default",on:{click:t.back_history}},[t._v("Вернуть")]):t._e(),s("button",{staticClass:"btn btn-success",on:{click:function(e){return t.onSuccess()}}},[t._v("Сохранить")]),t.checkTask()?s("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.$emit("removeItem")}}},[t._v("Удалить")]):t._e(),t.checkTask()?s("button",{staticClass:"btn btn-error",on:{click:function(e){return t.$emit("onCancel")}}},[t._v("Отменить")]):t._e(),t.historysIndex<t.historys.length-1?s("button",{staticClass:"btn btn-default",on:{click:t.next_history}},[t._v("Повторить")]):t._e()])],1)},B=[],D=(s("4de4"),s("fb6a"),s("b0c0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.list.length>0?s("div",{staticClass:"list"},t._l(t.list,(function(e,o){return s("div",{key:o,staticClass:"item"},[s("div",{staticClass:"onHover",on:{click:function(t){e.done=!e.done}}},[s("checkbox",{attrs:{checked:e.done,caption:e.name},on:{value:function(t){e.done=t}}})],1),s("button",{staticClass:"remove",attrs:{title:"Удалить"},on:{click:function(e){return t.remItem(o)}}},[t._v("×")])])})),0):t._e()}),L=[],P={name:"list",components:{checkbox:y},data:function(){return{}},props:{list:{type:Array}},methods:{remItem:function(t){this.$emit("remItem",t)}}},A=P,M=(s("1751"),Object(l["a"])(A,D,L,!1,null,"1509184e",null)),H=M.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"color_wrapper"},[t.$isEmpty(t.selected)?s("div",{staticClass:"title",class:{show:t.showBox},on:{click:function(e){t.showBox=!t.showBox}}},[t._v("Выбрате цвет")]):s("div",{staticClass:"title",class:{show:t.showBox},on:{click:function(e){t.showBox=!t.showBox}}},[s("div",{staticClass:"item"},[s("span",{class:t.selected.color}),s("span",{staticClass:"name"},[t._v(t._s(t.selected.name))])])]),t.showBox?s("div",{staticClass:"list"},t._l(t.list,(function(e){return s("div",{key:e.name,staticClass:"item",on:{click:function(s){return t.selectColor(e)}}},[s("span",{class:e.color}),s("span",{staticClass:"name"},[t._v(t._s(e.name))])])})),0):t._e()])},K=[],N={name:"selectbox",data:function(){return{showBox:!1,list:[{name:"По умолчанию",color:""},{name:"Розовый",color:"pink"},{name:"Оражевый",color:"orange"},{name:"Голубой",color:"blue"},{name:"Зеленый",color:"green"}]}},props:{color:{type:String,default:null}},methods:{selectColor:function(t){this.showBox=!1,this.selected=t}},computed:{selected:{get:function(){var t=this;return this.list.filter((function(e){return e.color===t.color}))[0]},set:function(t){this.$emit("value",t.color)}}}},Z=N,q=(s("5ef1"),Object(l["a"])(Z,J,K,!1,null,"80754218",null)),z=q.exports,F={name:"add",components:{list:H,colorSelectBox:z},data:function(){return{task_name:"",task_color:"",added_name:"",add_list:[],task_done:!1,historys:[],historysIndex:0}},props:{task:{name:{type:String,default:""},color:{type:String,default:""},list:{type:Array,default:[]},done:{type:Boolean}}},methods:{addObj:function(){""!==this.added_name?(this.$refs.subtask_name.classList.remove("err"),this.add_list.push({name:this.added_name,done:!1}),this.added_name="",this.add_history(),this.historysIndex=this.historys.length-1):this.$refs.subtask_name.classList.add("err")},remItem:function(t){this.add_list=this.add_list.filter((function(e,s){return s!==t})),this.add_history()},checkTask:function(){return void 0!==this.task},loadData:function(){void 0!==this.task&&(this.task_name=this.task.name,this.task_color=this.task.color,this.add_list=this.task.list,this.task_done=this.task.done)},setColor:function(t){this.task_color=t,this.add_history()},onSuccess:function(){""!==this.task_name?(this.$refs.task_name_input.classList.remove("err"),this.$emit("success",{id:this._uid,name:this.task_name,color:this.task_color,list:this.add_list,done:this.task_done}),this.task_name="",this.task_color="",this.add_list=[],this.task_done=!1,this.$emit("close"),this.add_history()):this.$refs.task_name_input.classList.add("err")},add_history:function(){this.historysIndex++,this.historys.push({name:this.task_name,color:this.task_color,added_name:this.added_name,list:this.add_list.slice(),done:this.task_done})},back_history:function(){var t=this.historysIndex-1;this.task_name=this.historys[t].name,this.task_color=this.historys[t].color,this.added_name=this.historys[t].added_name,this.add_list=this.historys[t].list.slice(),this.task_done=this.historys[t].done,this.historysIndex=t},next_history:function(){var t=this.historysIndex+1;this.task_name=this.historys[t].name,this.task_color=this.historys[t].color,this.added_name=this.historys[t].added_name,this.add_list=this.historys[t].list.slice(),this.task_done=this.historys[t].done,this.historysIndex=t}},mounted:function(){this.loadData(),this.add_history()}},G=F,Q=(s("4986"),Object(l["a"])(G,j,B,!1,null,"1a76616e",null)),R=Q.exports,U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit_wrapper"},[s("div",{staticClass:"header",class:t.task.color},[s("h2",[t._v("Редактирование таска")]),s("div",{staticClass:"close",on:{click:function(e){return t.$emit("editClose")}}},[t._v("×")])]),s("div",{staticClass:"body"},[s("add",{attrs:{task:t.task},on:{close:function(e){return t.$emit("editClose")},removeItem:function(e){return t.$emit("removeItem")},onCancel:function(e){return t.$emit("onCancel")}}})],1)])},V=[],W={name:"edit",components:{add:R},props:{task:{name:{type:String},color:{type:String},list:{type:Array,default:[]},done:{type:Boolean}}}},X=W,Y=(s("6565"),Object(l["a"])(X,U,V,!1,null,"6f782573",null)),tt=Y.exports,et={name:"App",data:function(){return{modal:{modalShow:!1,modalHeader:"",successText:"OK",errorText:"Отменить",successShow:!0,errorShow:!0,template:""},addTaskShow:!1,editTaskShow:!1,editTask:{}}},components:{navbar:h,todolist:x,modal:E,addTask:R,editTask:tt},methods:{getTodo:function(){return this.$store.getters.getTodoList},onedit:function(t){this.editTaskShow=!0,this.addTaskShow=!1,this.editTask=t},ondelete:function(t){this.modal={modalHeader:"Удалить ToDo",modalShow:!0,successText:"Удалить",errorText:"Отменить",successShow:!0,errorShow:!0},this.$store.dispatch("modalData",{whatDo:"delete",data:t}),this.addTaskShow=!1,this.editTaskShow=!1},onCancel:function(){this.modal={modalHeader:"Отменить изменения ToDo",modalShow:!0,successText:"Отменить",errorText:"Вернутся",successShow:!0,errorShow:!0},this.$store.commit("modalData",{whatDo:"cancel",data:this.editTask})},onAdd:function(){this.addTaskShow=!this.addTaskShow,this.editTaskShow=!1},addTask:function(t){this.$store.dispatch("addItem",t)},removeItem:function(){this.ondelete(this.editTask)},modalClick:function(t){if("success"===t){this.modal.modalShow=!1;var e=this.$store.getters.getModalData;"delete"===e.whatDo?(this.$store.dispatch("deleteItem",e.data),this.editTaskShow=!1):"cancel"===e.whatDo&&(this.editTaskShow=!1)}else this.modal.modalShow=!1}},mounted:function(){this.$store.dispatch("getTodo")}},st=et,ot=(s("cf25"),Object(l["a"])(st,a,n,!1,null,null,null)),at=ot.exports,nt=s("2f62"),it=s("bc3a"),rt=s.n(it);o["a"].use(nt["a"]);var ct=new nt["a"].Store({state:{todolist:null,modal:{data:{}}},mutations:{modalData:function(t,e){t.modal.data=e},deleteItem:function(t,e){t.todolist=t.todolist.filter((function(t){return t._id!==e._id}))},addItem:function(t,e){t.todolist.push(e)},setTodoList:function(t,e){t.todolist=e}},actions:{modalData:function(t,e){t.commit("modalData",e)},deleteItem:function(t,e){rt.a.delete("/todolist/".concat(e._id)).then((function(s){1===s.data.deletedCount&&t.commit("deleteItem",e)}))},addItem:function(t,e){rt.a.put("/todolist",e).then((function(e){t.commit("addItem",e.data)}))},getTodo:function(t){rt.a.get("/todolist").then((function(e){var s=Array.prototype.slice.call(e.data);t.commit("setTodoList",s)}))}},getters:{getTodoList:function(t){return t.todolist},getModalData:function(t){return t.modal.data}}});o["a"].use(nt["a"]),o["a"].config.productionTip=!1,o["a"].prototype.$isEmpty=function(t){return null===t||void 0===t||0===Object.entries(t).length},new o["a"]({render:function(t){return t(at)},store:ct}).$mount("#app")},"5ef1":function(t,e,s){"use strict";var o=s("1545"),a=s.n(o);a.a},6565:function(t,e,s){"use strict";var o=s("d6b1"),a=s.n(o);a.a},"6de6":function(t,e,s){"use strict";var o=s("7f60"),a=s.n(o);a.a},"71b7":function(t,e,s){},"7f60":function(t,e,s){},cf25:function(t,e,s){"use strict";var o=s("fea6"),a=s.n(o);a.a},d6b1:function(t,e,s){},e761:function(t,e,s){},fad3:function(t,e,s){},fea6:function(t,e,s){}});
//# sourceMappingURL=app.567c428c.js.map